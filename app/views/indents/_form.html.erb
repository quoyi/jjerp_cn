<!-- Modal -->
<div class="modal fade" id="addOrders" tabindex="-1" role="dialog" aria-labelledby="addOrdersLabel">
  <div class="modal-dialog" role="document" style="width: 80%;">
    <div class="modal-content">
      <%= nested_form_for @indent, html: {class: 'form-horizontal', multipart: true} do |f| %>
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="addOrdersLabel"> 子订单 <small>新建</small></h4>
      </div>
      <div class="modal-body">
        <div id="indentOrders">
        <%= f.fields_for :orders do |order_form| %>
        <hr>
        <div class="row" id="order-fields">
          <div class="col-sm-1 text-center indent-orders-title">
            <h4>子订单</h4>
          </div>
          <div class="col-sm-10">
            <div class="row">
              <div class="col-sm-2">
                <label>类型</label>
                <%= order_form.select :order_category_id, OrderCategory.all.map{|oc| [oc.name, oc.id]}, class: 'form-control', required: true %>
              </div>
              <div class="col-sm-2">
                <label>数量</label>
                <%= order_form.number_field :number, min: 1, style: "width: 50%;", required: true %>
              </div>
              <div class="col-sm-2">
                <label>厚度</label>
                <%= order_form.select :ply, MaterialCategory.where(oftype:MaterialCategory.oftypes[:ply]).map{|mc|[mc.name, mc.id]} %>
              </div>
              <div class="col-sm-2">
                <label>材质</label>
                <%= order_form.select :texture, MaterialCategory.where(oftype:MaterialCategory.oftypes[:texture]).map{|mc|[mc.name, mc.id]} %>
              </div>
              <div class="col-sm-2">
                <label>颜色</label>
                <%= order_form.select :color, MaterialCategory.where(oftype:MaterialCategory.oftypes[:color]).map{|mc|[mc.name, mc.id]} %>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-2">
                <label>长度</label>
                <%= order_form.number_field :length, min: 1, style: "width: 50%;", required: true %>
              </div>
              <div class="col-sm-2">
                <label>宽度</label>
                <%= order_form.number_field :width, min: 1, style: "width: 50%;", required: true %>
              </div>
              <div class="col-sm-2">
                <label>高度</label>
                <%= order_form.number_field :height, min: 1, style: "width: 50%;", required: true %>
              </div>
              <div class="col-sm-4">
                <label>备注</label>
                <%= order_form.text_field :note, style: "width: 90%;" %>
              </div>
            </div>
          </div>
          <div class="col-sm-1 text-center indent-orders-delete">
            <%= order_form.link_to_remove '删除', class: 'btn btn-info btn-lg' %>
          </div>
        </div>
        <% end %>
        </div>
      </div>
      <div class="modal-footer">
        <div class="pull-left">
          <%= f.link_to_add '添加子订单', :orders, class: 'btn btn-info', data: {target: '#indentOrders'} %>
        </div>
        <%= f.button '取消', class: 'btn btn-default', data: {dismiss: 'modal'} %>
        <%= f.submit '提交', class: 'btn btn-primary' %>
      </div>
      <% end %>
    </div>
  </div>
</div>